{ "openapi": "3.1.0","info": { "title": "OpenAPI definition","version": "v0" },"servers": [ { "url": "http://localhost:8080","description": "Generated server url" } ],"tags": [ { "name": "Card API for USER","description": "Работа с картами пользователя. Для USER" },{ "name": "Card API for ADMIN","description": "Работа с картами пользователя. Для ADMIN" },{ "name": "User API for ADMIN","description": "Работа с картами пользователя. Для ADMIN" },{ "name": "Authorization API","description": "Авторизация пользователя" },{ "name": "User API","description": "Изменение данных пользователя. Для всех ролей" } ],"paths": { "/api/v1/users/update_password": { "put": { "tags": [ "User API" ],"summary": "Обновление пароля","description": "Обновляет пароль у текущего пользователя","operationId": "updatePassword","requestBody": { "content": { "application/json": { "schema": { "$ref": "#/components/schemas/UserUpdatePassword" } } },"required": true },"responses": { "200": { "description": "Пароль обновлен" },"404": { "description": "Пользователь не найден","content": { "application/json": { "schema": { "type": "string" } } } } } } },"/api/v1/admin/users/{id}": { "get": { "tags": [ "User API for ADMIN" ],"summary": "Получение пользователя по ID","description": "Возвращает данные выбранного пользователя","operationId": "getUserById","parameters": [ { "name": "id","in": "path","required": true,"schema": { "type": "integer","format": "int64" } } ],"responses": { "200": { "description": "Данные получены","content": { "application/json": { "schema": { "$ref": "#/components/schemas/UserResponse" } } } },"404": { "description": "Пользователь не найден","content": { "application/json": { "schema": { "type": "string" } } } } } },"put": { "tags": [ "User API for ADMIN" ],"summary": "Обновление данных пользователя","description": "Обновляет и возвращает данные выбранного пользователя","operationId": "updateUser","parameters": [ { "name": "id","in": "path","required": true,"schema": { "type": "integer","format": "int64" } } ],"requestBody": { "content": { "application/json": { "schema": { "$ref": "#/components/schemas/UserUpdateRequest" } } },"required": true },"responses": { "200": { "description": "Данные изменены","content": { "application/json": { "schema": { "$ref": "#/components/schemas/UserResponse" } } } },"400": { "description": "Ошибка при работе с данными пользователя","content": { "application/json": { "schema": { "type": "string" } } } },"404": { "description": "Пользователь не найден","content": { "application/json": { "schema": { "type": "string" } } } } } },"delete": { "tags": [ "User API for ADMIN" ],"summary": "Удаление пользователя","description": "Удаляет выбранного пользователя","operationId": "deleteUserById","parameters": [ { "name": "id","in": "path","required": true,"schema": { "type": "integer","format": "int64" } } ],"responses": { "200": { "description": "Пользователь удален" },"404": { "description": "Пользователь не найден","content": { "application/json": { "schema": { "type": "string" } } } } } } },"/api/v1/admin/cards/status/{id}": { "put": { "tags": [ "Card API for ADMIN" ],"summary": "Изменить статус карты","description": "Изменяет статус выбранной карты","operationId": "updateStatus","parameters": [ { "name": "id","in": "path","required": true,"schema": { "type": "integer","format": "int64" } } ],"requestBody": { "content": { "application/json": { "schema": { "type": "string","enum": [ "ACTIVE","EXPIRED","BLOCKED" ] } } },"required": true },"responses": { "200": { "description": "Статус изменен" },"400": { "description": "Ошибка при работе с картой","content": { "application/json": { "schema": { "type": "string" } } } },"404": { "description": "Карта не найдена","content": { "application/json": { "schema": { "type": "string" } } } } } } },"/api/v1/cards/{id}/block-request": { "post": { "tags": [ "Card API for USER" ],"summary": "Создание запроса на блокировку","description": "Создает запрос на блокировку карты текущего пользователя и возвращает его","operationId": "requestBlock","parameters": [ { "name": "id","in": "path","required": true,"schema": { "type": "integer","format": "int64" } } ],"responses": { "200": { "description": "Запрос создан","content": { "application/json": { "schema": { "$ref": "#/components/schemas/BlockResponse" } } } },"400": { "description": "Ошибка при работе с картой","content": { "application/json": { "schema": { "type": "string" } } } },"404": { "description": "Карта не найдена","content": { "application/json": { "schema": { "type": "string" } } } } } } },"/api/v1/cards/transfer": { "post": { "tags": [ "Card API for USER" ],"summary": "Перевод между картами","description": "Переводит деньги между картами текущего пользователя","operationId": "transfer","requestBody": { "content": { "application/json": { "schema": { "$ref": "#/components/schemas/CardTransferRequest" } } },"required": true },"responses": { "200": { "description": "Перевод выполнен" },"400": { "description": "Ошибка при работе с картой","content": { "application/json": { "schema": { "type": "string" } } } },"404": { "description": "Карта не найдена","content": { "application/json": { "schema": { "type": "string" } } } } } } },"/api/v1/auth/register": { "post": { "tags": [ "Authorization API" ],"summary": "Регистрация пользователя","description": "Создает нового пользователя и возвращает данные этого пользователя","operationId": "register","requestBody": { "content": { "application/json": { "schema": { "$ref": "#/components/schemas/UserCreateRequest" } } },"required": true },"responses": { "200": { "description": "Пользователь создан","content": { "application/json": { "schema": { "$ref": "#/components/schemas/UserResponse" } } } },"400": { "description": "Ошибка создание пользователя","content": { "application/json": { "schema": { "type": "string" } } } } } } },"/api/v1/auth/login": { "post": { "tags": [ "Authorization API" ],"summary": "Вход в аккаунт","description": "Выполняет вход по логину и паролю и возвращает токен","operationId": "login","requestBody": { "content": { "application/json": { "schema": { "$ref": "#/components/schemas/UserLoginRequest" } } },"required": true },"responses": { "200": { "description": "Пользователь вошел в аккаунт","content": { "application/json": { "schema": { "$ref": "#/components/schemas/UserLoginResponse" } } } },"401": { "description": "Неверный логин или пароль","content": { "application/json": { "schema": { "type": "string" } } } },"404": { "description": "Пользователь не найден","content": { "application/json": { "schema": { "type": "string" } } } } } } },"/api/v1/admin/cards": { "get": { "tags": [ "Card API for ADMIN" ],"summary": "Получение всех карт","description": "Возвращает карты всех пользователей","operationId": "getAllCards","parameters": [ { "name": "pageable","in": "query","required": true,"schema": { "$ref": "#/components/schemas/Pageable" } } ],"responses": { "200": { "description": "Карты получены","content": { "application/json": { "schema": { "$ref": "#/components/schemas/CardResponse" } } } } } },"post": { "tags": [ "Card API for ADMIN" ],"summary": "Создание карты","description": "Создает карту указанному пользователю","operationId": "createCard","requestBody": { "content": { "application/json": { "schema": { "$ref": "#/components/schemas/CardCreateRequest" } } },"required": true },"responses": { "200": { "description": "Карта создана","content": { "application/json": { "schema": { "$ref": "#/components/schemas/CardResponse" } } } },"404": { "description": "Пользователь не найден","content": { "application/json": { "schema": { "type": "string" } } } } } } },"/api/v1/admin/cards/complete_request/{id}": { "post": { "tags": [ "Card API for ADMIN" ],"summary": "Выполнить запрос","description": "Выполняет указанный запрос на блокировку карты","operationId": "completeRequestBlock","parameters": [ { "name": "id","in": "path","required": true,"schema": { "type": "integer","format": "int64" } } ],"responses": { "200": { "description": "Запрос выполнен" },"404": { "description": "Запрос не найден","content": { "application/json": { "schema": { "type": "string" } } } } } } },"/api/v1/cards": { "get": { "tags": [ "Card API for USER" ],"summary": "Получение карт","description": "Возвращает все карты текущего пользователя","operationId": "getCards","parameters": [ { "name": "pageable","in": "query","required": true,"schema": { "$ref": "#/components/schemas/Pageable" } } ],"responses": { "200": { "description": "Карты получены","content": { "application/json": { "schema": { "$ref": "#/components/schemas/CardResponse" } } } } } } },"/api/v1/cards/{id}": { "get": { "tags": [ "Card API for USER" ],"summary": "Получение карты по ID","description": "Возвращает карту текущего пользователя по ID","operationId": "getCardById","parameters": [ { "name": "id","in": "path","required": true,"schema": { "type": "integer","format": "int64" } } ],"responses": { "200": { "description": "Карта получена","content": { "application/json": { "schema": { "$ref": "#/components/schemas/CardResponse" } } } },"400": { "description": "Карта не принадлежит пользователю","content": { "application/json": { "schema": { "type": "string" } } } },"404": { "description": "Карта не найдена","content": { "application/json": { "schema": { "type": "string" } } } } } } },"/api/v1/cards/{id}/balance": { "get": { "tags": [ "Card API for USER" ],"summary": "Получение баланса карты по ID","description": "Возвращает баланс карты текущего пользователя по ID","operationId": "getCardBalance","parameters": [ { "name": "id","in": "path","required": true,"schema": { "type": "integer","format": "int64" } } ],"responses": { "200": { "description": "Баланс карты получена","content": { "application/json": { "schema": { "type": "number" } } } },"400": { "description": "Карта не принадлежит пользователю","content": { "application/json": { "schema": { "type": "string" } } } },"404": { "description": "Карта не найдена","content": { "application/json": { "schema": { "type": "string" } } } } } } },"/api/v1/cards/request_block": { "get": { "tags": [ "Card API for USER" ],"summary": "Получение запросов на блокировку","description": "Возвращает все запросы на блокировку текущего пользователя","operationId": "requestBlock_1","parameters": [ { "name": "pageable","in": "query","required": true,"schema": { "$ref": "#/components/schemas/Pageable" } } ],"responses": { "200": { "description": "Запросы получены","content": { "application/json": { "schema": { "$ref": "#/components/schemas/BlockResponse" } } } },"404": { "description": "Пользователь не найден","content": { "application/json": { "schema": { "type": "string" } } } } } } },"/api/v1/admin/users": { "get": { "tags": [ "User API for ADMIN" ],"summary": "Получение всех пользователей","description": "Возвращает всех пользователей","operationId": "getAllUsers","parameters": [ { "name": "pageable","in": "query","required": true,"schema": { "$ref": "#/components/schemas/Pageable" } } ],"responses": { "200": { "description": "Пользователи получены","content": { "application/json": { "schema": { "$ref": "#/components/schemas/UserResponse" } } } } } } },"/api/v1/admin/cards/request_block": { "get": { "tags": [ "Card API for ADMIN" ],"summary": "Всех запросов на блокировку карт","description": "Возвращает все запросы на блокировку карт","operationId": "getAllRequestBlocks","parameters": [ { "name": "pageable","in": "query","required": true,"schema": { "$ref": "#/components/schemas/Pageable" } } ],"responses": { "200": { "description": "Запросы получены","content": { "application/json": { "schema": { "$ref": "#/components/schemas/BlockResponse" } } } } } } },"/api/v1/admin/cards/{id}": { "delete": { "tags": [ "Card API for ADMIN" ],"summary": "Удаление карты","description": "Удаляет указанную карту","operationId": "deleteCard","parameters": [ { "name": "id","in": "path","required": true,"schema": { "type": "integer","format": "int64" } } ],"responses": { "200": { "description": "Карта удалена" },"404": { "description": "Карта не найдена","content": { "application/json": { "schema": { "type": "string" } } } } } } } },"components": { "schemas": { "UserUpdatePassword": { "type": "object","properties": { "newPassword": { "type": "string","minLength": 1 } },"required": [ "newPassword" ] },"UserUpdateRequest": { "type": "object","properties": { "firstName": { "type": "string" },"secondName": { "type": "string" },"email": { "type": "string" },"password": { "type": "string" } } },"UserResponse": { "type": "object","properties": { "id": { "type": "integer","format": "int64" },"firstName": { "type": "string" },"secondName": { "type": "string" },"email": { "type": "string" },"role": { "type": "string","enum": [ "ADMIN","USER" ] } } },"BlockResponse": { "type": "object","properties": { "id": { "type": "integer","format": "int64" },"userId": { "type": "integer","format": "int64" },"cardId": { "type": "integer","format": "int64" },"status": { "type": "string","enum": [ "NOT_STARTED","IN_PROGRESS","COMPLETED" ] },"requestedAt": { "type": "string","format": "date-time" } } },"CardTransferRequest": { "type": "object","properties": { "fromCardId": { "type": "integer","format": "int64" },"toCardId": { "type": "integer","format": "int64" },"amount": { "type": "number" } },"required": [ "amount","fromCardId","toCardId" ] },"UserCreateRequest": { "type": "object","properties": { "firstName": { "type": "string","minLength": 1 },"secondName": { "type": "string","minLength": 1 },"email": { "type": "string","minLength": 1 },"password": { "type": "string","minLength": 1 },"role": { "type": "string","enum": [ "ADMIN","USER" ] } },"required": [ "email","firstName","password","role","secondName" ] },"UserLoginRequest": { "type": "object","properties": { "email": { "type": "string","minLength": 1 },"password": { "type": "string","minLength": 1 } },"required": [ "email","password" ] },"UserLoginResponse": { "type": "object","properties": { "token": { "type": "string" } } },"CardCreateRequest": { "type": "object","properties": { "email": { "type": "string","minLength": 1 } },"required": [ "email" ] },"CardResponse": { "type": "object","properties": { "id": { "type": "integer","format": "int64" },"cardNumber": { "type": "string" },"firstName": { "type": "string" },"secondName": { "type": "string" },"expirationDate": { "type": "string","format": "date" },"status": { "type": "string","enum": [ "ACTIVE","EXPIRED","BLOCKED" ] },"balance": { "type": "number" } } },"Pageable": { "type": "object","properties": { "page": { "type": "integer","format": "int32","minimum": 0 },"size": { "type": "integer","format": "int32","minimum": 1 },"sort": { "type": "array","items": { "type": "string" } } } } } } }